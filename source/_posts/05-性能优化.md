---
title: 性能优化
date: 2025-04-05 01:59:55
---

# 性能优化

性能优化是前端工程化的重要目标，良好的性能体验直接提升产品竞争力。

## 常见优化方向

- 资源压缩与合并（JS、CSS、图片等）
- 代码分割与按需加载
- 图片懒加载与优化（WebP、SVG、Sprite）
- Tree Shaking（去除无用代码）
- 服务端渲染（SSR，Server Side Rendering）
- CDN 加速

## 常用的性能优化方案及详细说明

### 1. 懒加载（Lazy Loading）

对图片、组件、路由等内容采用懒加载策略，只有当资源进入视口或即将进入视口时才进行加载，减少首屏加载资源，提升页面加载速度。常用 Intersection Observer API 实现图片和列表的懒加载。

### 2. 无限滚动（Infinite Scroll）

适用于长列表、大数据量的页面，用户滚动到底部时按需动态加载更多数据，避免一次性渲染全部内容，降低首屏压力，提升性能体验。

### 3. 节流与防抖

- **节流（Throttle）**：限制高频事件（如滚动、窗口缩放）在一定时间内只执行一次，减少回调触发频率，降低性能消耗。
- **防抖（Debounce）**：在事件停止触发一段时间后再执行回调，常用于输入框搜索、窗口大小变化等场景，防止重复触发。

### 4. 减少重排与重绘（Reflow & Repaint）

合理操作 DOM，避免频繁修改布局属性，合并样式修改，减少文档流回流和重绘次数，提升渲染性能。推荐批量操作 DOM 或使用类名切换样式，避免逐条修改。

#### 重排与重绘原理

- **重排（Reflow）**：指元素的几何结构（位置、大小等）发生变化时，浏览器需要重新计算布局，影响当前节点及其所有子节点甚至整个页面，开销较大。
- **重绘（Repaint）**：指元素外观（如颜色、背景等）发生改变但布局不变时，浏览器重新渲染元素外观，开销小于重排。

### 5. 压缩与混淆代码

使用构建工具（如 Webpack、Vite、Rspack、esbuild）集成 UglifyJS、Terser、esbuild 等进行 JS 代码压缩混淆，使用 cssnano 压缩 CSS，减少传输体积，加快资源下载速度。

### 6. 图片优化

- 使用现代图片格式（WebP、AVIF）替换传统格式，极大减小图片体积。
- 利用图片压缩工具（如 imagemin）优化体积。
- 大图采用懒加载，减少首屏资源体积。
- 小图标使用雪碧图或 SVG Sprite，减少请求次数。

### 7. 资源缓存

合理配置 HTTP 缓存策略（如 Cache-Control、ETag），利用浏览器缓存和 Service Worker 实现资源离线缓存，减少重复请求。

### 8. HTTP/2、HTTP/3 协议

升级到 HTTP/2 或 HTTP/3，支持多路复用、头部压缩等特性，提升多资源并发加载效率，减少请求阻塞。

### 9. 减少请求次数

通过合并 JS/CSS 文件、使用雪碧图/SVG Sprite、Base64 内联小图等方式减少 HTTP 请求次数，降低网络开销。

### 10. 代码分割与按需加载

利用构建工具的动态 import、路由懒加载等功能，将代码拆分为多个小包，按需加载，缩短首屏加载时间。

### 11. Tree Shaking

去除未被使用的代码（如未引用的模块和函数），减少最终打包体积，提高加载和执行效率。

### 12. 服务端渲染（SSR）

在服务器端将前端页面渲染为 HTML 后返回给客户端，提升首屏加载速度，改善 SEO，降低弱网环境下的白屏时间。常结合 Next.js、Nuxt.js 等框架落地。

### 13. CDN 加速

将静态资源（如 JS、CSS、图片等）部署到内容分发网络（CDN），提升资源的访问速度，降低服务器压力和带宽消耗。

### 14. 首屏优化

采用 Critical CSS、骨架屏（Skeleton）、SSR、预渲染等技术，加速首屏内容的呈现，提高用户体验。

### 15. 长列表虚拟滚动

如 React Virtualized、Vue Virtual Scroll List 等方案，仅渲染可视区域内的列表项，动态复用 DOM 节点，提升长列表渲染性能。

### 16. 性能监控与分析

集成 Lighthouse、Web Vitals、Sentry、New Relic 等性能监控工具，持续跟踪性能指标，定位瓶颈并做针对性优化。

## 服务端渲染（SSR）

服务端渲染（SSR）指的是在服务器端将前端页面内容渲染为 HTML 后返回给客户端，客户端再进行必要的激活（Hydration）。SSR 有以下优化作用：

- 提升首屏加载速度，减轻客户端渲染压力
- 改善 SEO，便于搜索引擎收录
- 降低弱网环境下的白屏时间
- 与前端框架（如 Next.js、Nuxt.js）结合效果最佳

## 工具与技术

- Webpack/Vite 配置优化
- Lighthouse 性能分析
- Chrome DevTools 性能分析
- Bundle Analyzer 可视化包体积

## 性能指标

- 首屏加载时间（FCP、LCP）
- 交互响应时间（TTI、FID）
- 资源下载速度